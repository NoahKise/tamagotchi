<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Tamagotchi</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="~/css/styles.css" />
</head>

<body>

  @using Tamagotchi.Models;

  <h1>Tamagotchis!</h1>

  @if (Model.Count == 0)
  {
    <p>There are no pets to display.</p>
  }
  @foreach (Pet pet in Model)
  {
    <div class="petCard">
      <div id="nameAndStats">
        <h2 class="petName">@pet.Name</h2>
        <ul>
          <li>Happiness: @pet.Happiness</li>
          <li>Hunger: @pet.Hunger</li>
          <li>Energy: @pet.Energy</li>
        </ul>
        <button><a href="/pets/@pet.Id">Play with Me!</a></button>
      </div>
      <div id="picAndStatus">
        <img class="tamagotchiImage" src="~/images/tama.svg" alt="tamagotchi" style="background-color: @pet.Color;" />
        @if (pet.Happiness == 0 || pet.Hunger == 10 || pet.Energy == 0)
        {
            <p>I am dead.
            YOU LET ME DIE!!!!</p>
        }
      </div>
      <br>
    </div>

  }
  <button><a href="/pets/new">Add a new pet.</a></button>
  <button><a href='/'>Home Page</a></button>

  <form id="timeForm" action="/pets/passTime" method="post">
  </form>
  </div>
   <script>
    // Set up an interval to submit the form every 10 seconds
    setInterval(function () {
      document.getElementById('timeForm').submit();
    }, 10000); // 10000 milliseconds = 10 seconds
  </script>
</body>

</html>